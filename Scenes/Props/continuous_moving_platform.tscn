[gd_scene load_steps=2 format=3 uid="uid://b633jbtar6pl6"]

[sub_resource type="GDScript" id="GDScript_64oqr"]
script/source = "extends PathFollow3D

@export var move_time:float
@export var position_curve:Curve
@export var beat_type:String
@export var boost_time_scale = 2.0
@export var default_time_scale = 1.0
@onready var children = self.get_children()

var elapsed = 0.0

func _process(delta):
	self.progress_ratio = position_curve.sample(fmod(elapsed / move_time, 1.0))
	for i in children:
		i.global_position = self.global_position
	if MusicStates[beat_type]:
		elapsed += boost_time_scale * delta
	else:
		elapsed += delta * default_time_scale
"

[node name="continuous_moving_platform" type="PathFollow3D"]
transform = Transform3D(0.999998, 0, 0, 0, 0.999995, 0, 0, 0, 1, 0, 0, 0)
rotation_mode = 0
script = SubResource("GDScript_64oqr")
move_time = 2.0
